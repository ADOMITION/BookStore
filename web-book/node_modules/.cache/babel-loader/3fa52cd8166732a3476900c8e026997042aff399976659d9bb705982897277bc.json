{"ast":null,"code":"export default {\n  data() {\n    return {\n      newMessage: '',\n      messages: [],\n      pageNum: 1,\n      pageSize: 10,\n      total: 0\n    };\n  },\n  mounted() {\n    this.loadMessages();\n  },\n  methods: {\n    formatTime(time) {\n      return new Date(time).toLocaleString();\n    },\n    async loadMessages() {\n      const res = await this.$axios.post('/guestbook/userList', {\n        pageNum: this.pageNum,\n        pageSize: this.pageSize\n      });\n      if (res.data.code === 200) {\n        this.messages = res.data.data;\n        this.total = res.data.total;\n      }\n    },\n    async submitMessage() {\n      if (!this.newMessage.trim()) return;\n      const res = await this.$axios.post('/guestbook/add', {\n        content: this.newMessage\n      });\n      if (res.data.code === 200) {\n        this.$message.success('留言成功');\n        this.newMessage = '';\n        this.loadMessages();\n      }\n    },\n    handlePageChange(val) {\n      this.pageNum = val;\n      this.loadMessages();\n    }\n  }\n};","map":{"version":3,"names":["data","newMessage","messages","pageNum","pageSize","total","mounted","loadMessages","methods","formatTime","time","Date","toLocaleString","res","$axios","post","code","submitMessage","trim","content","$message","success","handlePageChange","val"],"sources":["src/user/GuestbookPage.vue"],"sourcesContent":["<template>\r\n  <div class=\"message-container\">\r\n    <!-- 留言输入区域 -->\r\n    <el-card class=\"input-card\">\r\n      <el-input\r\n          type=\"textarea\"\r\n          v-model=\"newMessage\"\r\n          :rows=\"4\"\r\n          placeholder=\"写下您的留言...\"\r\n      ></el-input>\r\n      <div class=\"btn-group\">\r\n        <el-button type=\"primary\" @click=\"submitMessage\">提交留言</el-button>\r\n      </div>\r\n    </el-card>\r\n\r\n    <!-- 留言列表 -->\r\n    <el-card class=\"list-card\">\r\n      <div v-for=\"msg in messages\" :key=\"msg.id\" class=\"message-item\">\r\n        <div class=\"user-message\">\r\n          <div class=\"time\">{{ formatTime(msg.createTime) }}</div>\r\n          <div class=\"content\">{{ msg.content }}</div>\r\n        </div>\r\n        <div v-if=\"msg.adminReply\" class=\"admin-reply\">\r\n          <el-tag type=\"success\" effect=\"dark\">管理员回复：</el-tag>\r\n          <div class=\"reply-content\">{{ msg.adminReply }}</div>\r\n          <div class=\"reply-time\">{{ formatTime(msg.updateTime) }}</div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- 分页 -->\r\n      <el-pagination\r\n          @current-change=\"handlePageChange\"\r\n          :current-page=\"pageNum\"\r\n          :page-size=\"pageSize\"\r\n          :total=\"total\"\r\n          layout=\"prev, pager, next\"\r\n      ></el-pagination>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      newMessage: '',\r\n      messages: [],\r\n      pageNum: 1,\r\n      pageSize: 10,\r\n      total: 0\r\n    }\r\n  },\r\n  mounted() {\r\n    this.loadMessages()\r\n  },\r\n  methods: {\r\n    formatTime(time) {\r\n      return new Date(time).toLocaleString()\r\n    },\r\n    async loadMessages() {\r\n      const res = await this.$axios.post('/guestbook/userList', {\r\n        pageNum: this.pageNum,\r\n        pageSize: this.pageSize\r\n      })\r\n      if (res.data.code === 200) {\r\n        this.messages = res.data.data\r\n        this.total = res.data.total\r\n      }\r\n    },\r\n    async submitMessage() {\r\n      if (!this.newMessage.trim()) return\r\n      const res = await this.$axios.post('/guestbook/add', {\r\n        content: this.newMessage\r\n      })\r\n      if (res.data.code === 200) {\r\n        this.$message.success('留言成功')\r\n        this.newMessage = ''\r\n        this.loadMessages()\r\n      }\r\n    },\r\n    handlePageChange(val) {\r\n      this.pageNum = val\r\n      this.loadMessages()\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.message-container {\r\n  max-width: 800px;\r\n  margin: 20px auto;\r\n}\r\n.input-card {\r\n  margin-bottom: 20px;\r\n}\r\n.btn-group {\r\n  margin-top: 10px;\r\n  text-align: right;\r\n}\r\n.message-item {\r\n  padding: 15px;\r\n  border-bottom: 1px solid #eee;\r\n}\r\n.user-message .time {\r\n  color: #999;\r\n  font-size: 12px;\r\n}\r\n.admin-reply {\r\n  margin-top: 10px;\r\n  padding: 10px;\r\n  background: #f8f8f8;\r\n  border-radius: 4px;\r\n}\r\n.reply-time {\r\n  color: #999;\r\n  font-size: 12px;\r\n  text-align: right;\r\n}\r\n</style>"],"mappings":"AA0CA;EACAA,KAAA;IACA;MACAC,UAAA;MACAC,QAAA;MACAC,OAAA;MACAC,QAAA;MACAC,KAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAC,YAAA;EACA;EACAC,OAAA;IACAC,WAAAC,IAAA;MACA,WAAAC,IAAA,CAAAD,IAAA,EAAAE,cAAA;IACA;IACA,MAAAL,aAAA;MACA,MAAAM,GAAA,cAAAC,MAAA,CAAAC,IAAA;QACAZ,OAAA,OAAAA,OAAA;QACAC,QAAA,OAAAA;MACA;MACA,IAAAS,GAAA,CAAAb,IAAA,CAAAgB,IAAA;QACA,KAAAd,QAAA,GAAAW,GAAA,CAAAb,IAAA,CAAAA,IAAA;QACA,KAAAK,KAAA,GAAAQ,GAAA,CAAAb,IAAA,CAAAK,KAAA;MACA;IACA;IACA,MAAAY,cAAA;MACA,UAAAhB,UAAA,CAAAiB,IAAA;MACA,MAAAL,GAAA,cAAAC,MAAA,CAAAC,IAAA;QACAI,OAAA,OAAAlB;MACA;MACA,IAAAY,GAAA,CAAAb,IAAA,CAAAgB,IAAA;QACA,KAAAI,QAAA,CAAAC,OAAA;QACA,KAAApB,UAAA;QACA,KAAAM,YAAA;MACA;IACA;IACAe,iBAAAC,GAAA;MACA,KAAApB,OAAA,GAAAoB,GAAA;MACA,KAAAhB,YAAA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}