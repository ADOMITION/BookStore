{"ast":null,"code":"export default {\n  name: \"UserCenter\",\n  data() {\n    let checkDuplicate = (rule, value, callback) => {\n      if (this.userInfo.id) {\n        return callback();\n      }\n      this.$axios.get(this.$httpUrl + \"/user/findByNo?no=\" + this.userInfo.no).then(res => res.data).then(res => {\n        if (res.code !== 200) {\n          callback();\n        } else {\n          callback(new Error('用户名已经存在'));\n        }\n      });\n    };\n    return {\n      user: sessionStorage.getItem('CurUser'),\n      userInfo: {\n        id: this.user.id,\n        no: '',\n        name: '',\n        password: '',\n        email: '',\n        phone: '',\n        company: ''\n      },\n      rules: {\n        no: [{\n          required: true,\n          message: '请更新您的用户名',\n          trigger: 'blur'\n        }, {\n          min: 3,\n          max: 8,\n          message: '长度在 3 到 8 个字符',\n          trigger: 'blur'\n        }, {\n          validator: checkDuplicate,\n          trigger: 'blur'\n        }],\n        name: [{\n          required: true,\n          message: '请更新您的名字',\n          trigger: 'blur'\n        }],\n        password: [{\n          required: true,\n          message: '请更新您的密码',\n          trigger: 'blur'\n        }, {\n          min: 3,\n          max: 8,\n          message: '长度在 3 到 8 个字符',\n          trigger: 'blur'\n        }],\n        email: [{\n          required: true,\n          message: '请请更新您的电子邮件',\n          trigger: 'blur'\n        }],\n        phone: [{\n          required: true,\n          message: \"手机号不能为空，请更新您的手机号\",\n          trigger: \"blur\"\n        }, {\n          pattern: /^1[3|4|5|6|7|8|9][0-9]\\d{8}$/,\n          message: \"请输入正确的手机号码\",\n          trigger: \"blur\"\n        }],\n        company: [{\n          required: true,\n          message: '请更新您的收货地址',\n          trigger: 'blur'\n        }]\n      }\n    };\n  },\n  created() {\n    this.axios.get(this.$httpUrl + '/user/profile' + this).then(response => {\n      console.log(response.data);\n      this.userInfo = response.data;\n    });\n  },\n  methods: {\n    saveInfo() {\n      this.axios.post(this.$httpUrl + '/user/uupdate').then(response => {\n        if (response.data.code === 200) {\n          this.$message.success('信息保存成功！');\n        } else {\n          this.$message.error('信息保存失败，请稍后重试！');\n        }\n      });\n    }\n  }\n};","map":{"version":3,"names":["name","data","checkDuplicate","rule","value","callback","userInfo","id","$axios","get","$httpUrl","no","then","res","code","Error","user","sessionStorage","getItem","password","email","phone","company","rules","required","message","trigger","min","max","validator","pattern","created","axios","response","console","log","methods","saveInfo","post","$message","success","error"],"sources":["src/user/UserCenter.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <h3 style=\"text-align: center; margin-top: 20px\">个人信息</h3>\r\n    <el-form :model=\"userInfo\" ref=\"userInfoForm\" :rules=\"rules\" label-width=\"100px\" style=\"margin: 20px auto; width: 400px\">\r\n      <el-form-item label=\"用户名\" prop=\"no\">\r\n        <el-input v-model=\"userInfo.no\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"名字\" prop=\"name\">\r\n        <el-input v-model=\"userInfo.name\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"密码\" prop=\"password\">\r\n          <el-input v-model=\"userInfo.password\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"电子邮件\" prop=\"email\">\r\n          <el-input v-model=\"userInfo.email\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"联系方式\" prop=\"phone\">\r\n        <el-input v-model=\"userInfo.phone\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"收货地址\" prop=\"company\">\r\n        <el-input v-model=\"userInfo.company\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-button type=\"primary\" @click=\"saveInfo\">保存信息</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"UserCenter\",\r\n  data() {\r\n    let checkDuplicate =(rule,value,callback)=>{\r\n      if(this.userInfo.id){\r\n        return callback();\r\n      }\r\n      this.$axios.get(this.$httpUrl+\"/user/findByNo?no=\"+this.userInfo.no).then(res=>res.data).then(res=>{\r\n        if(res.code!==200){\r\n          callback()\r\n        }else{\r\n          callback(new Error('用户名已经存在'));\r\n        }\r\n      })\r\n    };\r\n    return {\r\n      user : sessionStorage.getItem('CurUser'),\r\n      userInfo: {\r\n        id:this.user.id,\r\n        no:'',\r\n        name:'',\r\n        password:'',\r\n        email:'',\r\n        phone:'',\r\n        company:''\r\n      },\r\n\r\n      rules: {\r\n        no: [\r\n          {required: true, message: '请更新您的用户名', trigger: 'blur'},\r\n          {min: 3, max: 8, message: '长度在 3 到 8 个字符', trigger: 'blur'},\r\n          {validator:checkDuplicate,trigger: 'blur'}\r\n        ],\r\n        name: [\r\n          {required: true, message: '请更新您的名字', trigger: 'blur'}\r\n        ],\r\n        password: [\r\n          {required: true, message: '请更新您的密码', trigger: 'blur'},\r\n          {min: 3, max: 8, message: '长度在 3 到 8 个字符', trigger: 'blur'}\r\n        ],\r\n        email: [\r\n          {required: true, message: '请请更新您的电子邮件', trigger: 'blur'}\r\n        ],\r\n        phone: [\r\n          {required: true,message: \"手机号不能为空，请更新您的手机号\",trigger: \"blur\"},\r\n          {pattern: /^1[3|4|5|6|7|8|9][0-9]\\d{8}$/, message: \"请输入正确的手机号码\", trigger: \"blur\"}\r\n        ],\r\n        company: [\r\n          {required: true, message: '请更新您的收货地址', trigger: 'blur'}\r\n        ],\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n    this.axios.get(this.$httpUrl+'/user/profile'+this)\r\n        .then(response => {\r\n          console.log(response.data)\r\n          this.userInfo = response.data;\r\n        })\r\n  },\r\n  methods: {\r\n    saveInfo() {\r\n      this.axios.post(this.$httpUrl+'/user/uupdate')\r\n          .then(response => {\r\n            if (response.data.code === 200) {\r\n              this.$message.success('信息保存成功！');\r\n            } else {\r\n              this.$message.error('信息保存失败，请稍后重试！');\r\n            }\r\n          })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>"],"mappings":"AA8BA;EACAA,IAAA;EACAC,KAAA;IACA,IAAAC,cAAA,GAAAA,CAAAC,IAAA,EAAAC,KAAA,EAAAC,QAAA;MACA,SAAAC,QAAA,CAAAC,EAAA;QACA,OAAAF,QAAA;MACA;MACA,KAAAG,MAAA,CAAAC,GAAA,MAAAC,QAAA,+BAAAJ,QAAA,CAAAK,EAAA,EAAAC,IAAA,CAAAC,GAAA,IAAAA,GAAA,CAAAZ,IAAA,EAAAW,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,IAAA;UACAT,QAAA;QACA;UACAA,QAAA,KAAAU,KAAA;QACA;MACA;IACA;IACA;MACAC,IAAA,EAAAC,cAAA,CAAAC,OAAA;MACAZ,QAAA;QACAC,EAAA,OAAAS,IAAA,CAAAT,EAAA;QACAI,EAAA;QACAX,IAAA;QACAmB,QAAA;QACAC,KAAA;QACAC,KAAA;QACAC,OAAA;MACA;MAEAC,KAAA;QACAZ,EAAA,GACA;UAAAa,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA,GACA;UAAAC,GAAA;UAAAC,GAAA;UAAAH,OAAA;UAAAC,OAAA;QAAA,GACA;UAAAG,SAAA,EAAA3B,cAAA;UAAAwB,OAAA;QAAA,EACA;QACA1B,IAAA,GACA;UAAAwB,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA,EACA;QACAP,QAAA,GACA;UAAAK,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA,GACA;UAAAC,GAAA;UAAAC,GAAA;UAAAH,OAAA;UAAAC,OAAA;QAAA,EACA;QACAN,KAAA,GACA;UAAAI,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA,EACA;QACAL,KAAA,GACA;UAAAG,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA,GACA;UAAAI,OAAA;UAAAL,OAAA;UAAAC,OAAA;QAAA,EACA;QACAJ,OAAA,GACA;UAAAE,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA;MAEA;IACA;EACA;EACAK,QAAA;IACA,KAAAC,KAAA,CAAAvB,GAAA,MAAAC,QAAA,2BACAE,IAAA,CAAAqB,QAAA;MACAC,OAAA,CAAAC,GAAA,CAAAF,QAAA,CAAAhC,IAAA;MACA,KAAAK,QAAA,GAAA2B,QAAA,CAAAhC,IAAA;IACA;EACA;EACAmC,OAAA;IACAC,SAAA;MACA,KAAAL,KAAA,CAAAM,IAAA,MAAA5B,QAAA,oBACAE,IAAA,CAAAqB,QAAA;QACA,IAAAA,QAAA,CAAAhC,IAAA,CAAAa,IAAA;UACA,KAAAyB,QAAA,CAAAC,OAAA;QACA;UACA,KAAAD,QAAA,CAAAE,KAAA;QACA;MACA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}