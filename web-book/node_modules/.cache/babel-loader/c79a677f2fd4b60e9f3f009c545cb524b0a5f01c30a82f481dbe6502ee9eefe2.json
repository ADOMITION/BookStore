{"ast":null,"code":"export default {\n  data() {\n    return {\n      loading: false,\n      loginForm: {\n        no: '',\n        password: ''\n      },\n      rules: {\n        no: [{\n          required: true,\n          message: '账号不能为空',\n          trigger: 'blur'\n        }],\n        password: [{\n          required: true,\n          message: '密码不能为空',\n          trigger: 'blur'\n        }]\n      }\n    };\n  },\n  methods: {\n    async confirm() {\n      try {\n        this.loading = true;\n        await this.$refs.loginForm.validate();\n        const {\n          data: res\n        } = await this.$axios.post(this.$httpUrl + '/user/login', this.loginForm);\n        if (res.code !== 200) throw new Error(res.msg);\n        sessionStorage.setItem(\"CurUser\", JSON.stringify(res.data));\n        this.redirectByRole(res.data.roleId);\n        this.$message.success('登录成功');\n      } catch (err) {\n        this.$message.error('登录失败，,请检查用户名或密码');\n      } finally {\n        this.loading = false;\n      }\n    },\n    redirectByRole(roleId) {\n      const routes = {\n        0: '/admin',\n        1: '/'\n      };\n      this.$router.replace(routes[roleId] || '/');\n    },\n    showForget() {\n      this.$message.info('请联系客服电话(1XXX00)重置密码');\n    }\n  }\n};","map":{"version":3,"names":["data","loading","loginForm","no","password","rules","required","message","trigger","methods","confirm","$refs","validate","res","$axios","post","$httpUrl","code","Error","msg","sessionStorage","setItem","JSON","stringify","redirectByRole","roleId","$message","success","err","error","routes","$router","replace","showForget","info"],"sources":["src/Login.vue"],"sourcesContent":["<template>\r\n  <div class=\"login-container\">\r\n    <div class=\"login-box\">\r\n      <div class=\"animated fadeIn\">\r\n        <div class=\"logo-container\">\r\n          <img src=\"@/assets/book-logo.png\" alt=\"书店logo\" class=\"logo\">\r\n        </div>\r\n        <h1 class=\"login-title\">书香悦读</h1>\r\n        <p class=\"login-subtitle\">与书为伴，与智慧同行</p>\r\n        <el-form\r\n            ref=\"loginForm\"\r\n            :model=\"loginForm\"\r\n            :rules=\"rules\"\r\n            status-icon\r\n            @keyup.enter.native=\"confirm\"\r\n        >\r\n          <el-form-item prop=\"no\">\r\n            <el-input\r\n                v-model=\"loginForm.no\"\r\n                prefix-icon=\"el-icon-user\"\r\n                placeholder=\"请输入账号\"\r\n                clearable\r\n            ></el-input>\r\n          </el-form-item>\r\n\r\n          <el-form-item prop=\"password\">\r\n            <el-input\r\n                v-model=\"loginForm.password\"\r\n                prefix-icon=\"el-icon-lock\"\r\n                placeholder=\"请输入密码\"\r\n                show-password\r\n                clearable\r\n            ></el-input>\r\n          </el-form-item>\r\n\r\n          <el-form-item>\r\n            <el-button\r\n                type=\"primary\"\r\n                @click=\"confirm\"\r\n                :loading=\"loading\"\r\n                class=\"submit-btn\"\r\n            >\r\n              登录\r\n            </el-button>\r\n          </el-form-item>\r\n\r\n          <div class=\"footer-links\">\r\n            <router-link to=\"/register\">立即注册</router-link>\r\n            <span>|</span>\r\n            <a @click=\"showForget\">忘记密码?</a>\r\n          </div>\r\n        </el-form>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      loading: false,\r\n      loginForm: {\r\n        no: '',\r\n        password: ''\r\n      },\r\n      rules: {\r\n        no: [{ required: true, message: '账号不能为空', trigger: 'blur' }],\r\n        password: [\r\n          { required: true, message: '密码不能为空', trigger: 'blur' },\r\n        ]\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    async confirm() {\r\n      try {\r\n        this.loading = true\r\n        await this.$refs.loginForm.validate()\r\n\r\n        const { data: res } = await this.$axios.post(this.$httpUrl+'/user/login', this.loginForm)\r\n        if (res.code !== 200) throw new Error(res.msg)\r\n\r\n        sessionStorage.setItem(\"CurUser\", JSON.stringify(res.data))\r\n        this.redirectByRole(res.data.roleId)\r\n        this.$message.success('登录成功')\r\n      } catch (err) {\r\n        this.$message.error('登录失败，,请检查用户名或密码')\r\n      } finally {\r\n        this.loading = false\r\n      }\r\n    },\r\n\r\n    redirectByRole(roleId) {\r\n      const routes = {\r\n        0: '/admin',\r\n        1: '/'\r\n      }\r\n      this.$router.replace(routes[roleId] || '/')\r\n    },\r\n\r\n    showForget() {\r\n      this.$message.info('请联系客服电话(1XXX00)重置密码')\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.login-container {\r\n  height: 100vh;\r\n  background: linear-gradient(rgba(255, 255, 255, 0.9), rgba(255, 255, 255, 0.9)),\r\n              url('@/assets/books-pattern.jpg');\r\n  background-size: cover;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n.login-box {\r\n  width: 420px;\r\n  padding: 40px;\r\n  background: #ffffff;\r\n  border-radius: 15px;\r\n  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.08);\r\n  border: 1px solid rgba(0, 0, 0, 0.05);\r\n}\r\n\r\n.logo-container {\r\n  text-align: center;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.logo {\r\n  width: 80px;\r\n  height: 80px;\r\n  object-fit: contain;\r\n}\r\n\r\n.login-title {\r\n  text-align: center;\r\n  color: #2c3e50;\r\n  margin-bottom: 10px;\r\n  font-size: 32px;\r\n  font-weight: 600;\r\n  font-family: \"STXingkai\", serif;\r\n}\r\n\r\n.login-subtitle {\r\n  text-align: center;\r\n  color: #666;\r\n  margin-bottom: 30px;\r\n  font-size: 16px;\r\n  font-weight: 300;\r\n}\r\n\r\n.submit-btn {\r\n  width: 100%;\r\n  height: 45px;\r\n  font-size: 16px;\r\n  background: #8B4513;\r\n  border-color: #8B4513;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.submit-btn:hover {\r\n  background: #A0522D;\r\n  border-color: #A0522D;\r\n  transform: translateY(-1px);\r\n}\r\n\r\n.footer-links {\r\n  text-align: center;\r\n  margin-top: 25px;\r\n  color: #999;\r\n  font-size: 14px;\r\n}\r\n\r\n.footer-links a {\r\n  color: #8B4513;\r\n  margin: 0 12px;\r\n  cursor: pointer;\r\n  transition: color 0.3s;\r\n  text-decoration: none;\r\n}\r\n\r\n.footer-links a:hover {\r\n  color: #A0522D;\r\n  text-decoration: underline;\r\n}\r\n\r\n.footer-links span {\r\n  color: #ddd;\r\n}\r\n\r\n:deep(.el-input__inner) {\r\n  height: 45px;\r\n  border-radius: 8px;\r\n  border: 1px solid #ddd;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n:deep(.el-input__inner):focus {\r\n  border-color: #8B4513;\r\n  box-shadow: 0 0 0 2px rgba(139, 69, 19, 0.1);\r\n}\r\n\r\n:deep(.el-input__prefix) {\r\n  left: 10px;\r\n}\r\n\r\n.animated {\r\n  animation: fadeIn 0.8s ease-out;\r\n}\r\n\r\n@keyframes fadeIn {\r\n  from { \r\n    opacity: 0; \r\n    transform: translateY(30px); \r\n  }\r\n  to { \r\n    opacity: 1; \r\n    transform: translateY(0); \r\n  }\r\n}\r\n</style>"],"mappings":"AA0DA;EACAA,KAAA;IACA;MACAC,OAAA;MACAC,SAAA;QACAC,EAAA;QACAC,QAAA;MACA;MACAC,KAAA;QACAF,EAAA;UAAAG,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA;QACAJ,QAAA,GACA;UAAAE,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA;MAEA;IACA;EACA;EACAC,OAAA;IACA,MAAAC,QAAA;MACA;QACA,KAAAT,OAAA;QACA,WAAAU,KAAA,CAAAT,SAAA,CAAAU,QAAA;QAEA;UAAAZ,IAAA,EAAAa;QAAA,eAAAC,MAAA,CAAAC,IAAA,MAAAC,QAAA,uBAAAd,SAAA;QACA,IAAAW,GAAA,CAAAI,IAAA,oBAAAC,KAAA,CAAAL,GAAA,CAAAM,GAAA;QAEAC,cAAA,CAAAC,OAAA,YAAAC,IAAA,CAAAC,SAAA,CAAAV,GAAA,CAAAb,IAAA;QACA,KAAAwB,cAAA,CAAAX,GAAA,CAAAb,IAAA,CAAAyB,MAAA;QACA,KAAAC,QAAA,CAAAC,OAAA;MACA,SAAAC,GAAA;QACA,KAAAF,QAAA,CAAAG,KAAA;MACA;QACA,KAAA5B,OAAA;MACA;IACA;IAEAuB,eAAAC,MAAA;MACA,MAAAK,MAAA;QACA;QACA;MACA;MACA,KAAAC,OAAA,CAAAC,OAAA,CAAAF,MAAA,CAAAL,MAAA;IACA;IAEAQ,WAAA;MACA,KAAAP,QAAA,CAAAQ,IAAA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}